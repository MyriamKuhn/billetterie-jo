import{b as l}from"./index-CXZF4oSR.js";import{d as f}from"./billingService-DzyWgT6A.js";import{r as m}from"./react-C0aVURRx.js";import{u as w}from"./useCustomSnackbar-H5kbubpM.js";import{u as p}from"./i18n-react-CHYEX_9Z.js";function k(){const a=l(t=>t.authToken),{t:r}=p("invoices"),{notify:s}=w(),[u,c]=m.useState(!1);return{download:async t=>{var d,i;if(!a){s(r("errors.not_authenticated"),"warning");return}c(!0);try{const n=await f(t,a),e=window.URL.createObjectURL(n),o=document.createElement("a");o.href=e,o.download=t,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(e),s(r("card.download_success"),"success")}catch(n){let e=r("errors.download_failed"),o="error";((d=n.response)==null?void 0:d.status)===404?(e=r("errors.not_found"),o="warning"):((i=n.response)==null?void 0:i.status)===401&&(e=r("errors.unauthorized"),o="warning"),s(e,o)}finally{c(!1)}},downloading:u}}export{k as u};
