import{r as l,j as t}from"./react-C0aVURRx.js";import{a as P,S,P as y,p as E}from"./index-CZ2e1OXn.js";import{A as k,g as u}from"./AlertMessage-CjAQb_f3.js";import{a as C}from"./axios-xsH4HHeE.js";import{a as L}from"./validation-491qobvS.js";import{u as T}from"./i18n-react-CHYEX_9Z.js";import{q as x,t as f,N as A,$ as B,B as F,C as M,a4 as W}from"./mui-BBaOU7V-.js";import{O as $}from"./vendor-1UMx7qFY.js";import"./dayjs-DMyafwSS.js";import"./zustand-DgaMZn_z.js";import"./i18n-Bhc83OLH.js";import"./emotion-BKoPsIBf.js";import"./helmet-DqAb31yQ.js";import"./cookie-consent-DYVQHhqE.js";function Q(){const{t:e}=T("forgotPassword"),h=$(),b=P.getState().lang,[r,w]=l.useState(""),[d,g]=l.useState(!1),[c,m]=l.useState("idle"),[j,o]=l.useState(""),n=L(r.trim()),v=async a=>{var p;if(a.preventDefault(),!!n){g(!0),m("idle"),o("");try{const{status:i}=await E(r.trim(),b);if(i>=200&&i<300)m("success"),o(e("forgotPassword.successMessage"));else throw new Error("Unexpected status")}catch(i){if(C.isAxiosError(i)){const s=(p=i.response)==null?void 0:p.data;s!=null&&s.code?o(u(e,s==null?void 0:s.code)):o(u(e,"generic_error"))}else o(u(e,"network_error"));m("error")}finally{g(!1)}}};return t.jsxs(t.Fragment,{children:[t.jsx(S,{title:e("seo.title"),description:e("seo.description")}),t.jsx(y,{disableCard:!0,children:t.jsxs(x,{component:"form",onSubmit:v,sx:{maxWidth:400,mx:"auto",mt:{xs:1,sm:4,md:8},p:4,borderRadius:2,boxShadow:3,backgroundColor:"background.paper",border:a=>`1px solid ${a.palette.divider}`},children:[t.jsx(f,{variant:"h4",gutterBottom:!0,align:"center",children:e("forgotPassword.title")}),t.jsx(f,{variant:"body1",align:"center",sx:{mb:2},children:e("forgotPassword.description")}),(c==="error"||c==="success")&&t.jsx(k,{message:j,severity:c==="success"?"success":"error"}),t.jsxs(A,{spacing:2,sx:{mt:2},children:[t.jsx(B,{required:!0,fullWidth:!0,id:"email",label:e("forgotPassword.email"),type:"email",value:r,onChange:a=>w(a.target.value),autoComplete:"email",error:r.length>0&&!n,helperText:r.length>0&&!n?e("forgotPassword.invalidEmail"):""}),t.jsx(F,{type:"submit",variant:"contained",fullWidth:!0,disabled:d||!n,startIcon:d?t.jsx(M,{color:"inherit",size:16}):void 0,children:d?`${e("forgotPassword.buttonLoading")}â€¦`:e("forgotPassword.button")}),t.jsx(x,{sx:{textAlign:"center",mt:1},children:t.jsx(W,{component:"button",variant:"body2",onClick:()=>h("/login"),children:e("forgotPassword.backToLogin")})})]})]})})]})}export{Q as default};
