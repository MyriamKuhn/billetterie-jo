import{r as n,j as s}from"./react-C0aVURRx.js";import{a as v,b as A,P as h,S as C,O as S}from"./index-C8vFMK_G.js";import{u as w,U as _,A as P,a as b,b as D}from"./AdminEmployeeCreateModal-aaAl_mqR.js";import{u as R}from"./useUsers-CBZkbi0s.js";import{E as T}from"./ErrorDisplay-Zu0HG1b7.js";import{u as k}from"./i18n-react-InMECBPB.js";import{v as O,q as l,a0 as B}from"./mui-uHutCCHi.js";import"./dayjs-DMyafwSS.js";import"./axios-Dq7h7Pqt.js";import"./zustand-DgaMZn_z.js";import"./vendor-DWEXA6-K.js";import"./i18n-Bhc83OLH.js";import"./emotion-BfGcg3ty.js";import"./helmet-BZ3LMwLd.js";import"./cookie-consent-DtjjNNxi.js";import"./FilterField-B6HJt_C_.js";import"./FilterSelect-CNa929qR.js";import"./format-_gz818Hm.js";import"./useCustomSnackbar-D46cyU61.js";import"./PasswordWithConfirmation-BLLWGUvq.js";function re(){const{t}=k("users"),m=v(e=>e.lang),p=A(e=>e.authToken),j=w(),[i,a]=n.useState({firstname:"",lastname:"",email:"",perPage:10,page:1}),{users:c,total:y,loading:u,error:E,validationErrors:o}=R(i,p,"user"),[f,x]=n.useState(null),[U,d]=n.useState(!1);return n.useEffect(()=>{if(o){const e={};o.firstname&&(e.firstname=""),o.lastname&&(e.lastname=""),o.email&&(e.email=""),a(r=>({...r,...e}))}},[o]),E?s.jsx(h,{children:s.jsx(T,{title:t("errors.title"),message:t("errors.unexpected"),showRetry:!0,retryButtonText:t("errors.retry"),onRetry:()=>a(e=>({...e})),showHome:!0,homeButtonText:t("errors.home")})}):s.jsxs(s.Fragment,{children:[s.jsx(C,{title:t("seo.title"),description:t("seo.description")}),s.jsxs(h,{disableCard:!0,children:[s.jsx(O,{variant:"h4",sx:{px:2},children:t("users.title")}),s.jsxs(l,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,p:2},children:[s.jsx(_,{role:"user",filters:i,onChange:e=>a(r=>({...r,...e}))}),s.jsxs(l,{component:"main",flex:1,children:[u?s.jsx(l,{textAlign:"center",py:8,children:s.jsx(S,{})}):s.jsx(P,{lang:m,users:c,onViewDetails:x,onSave:async(e,r)=>await j(e,{is_active:r.is_active,twofa_enabled:r.twofa_enabled,firstname:r.firstname,lastname:r.lastname,email:r.email,role:"user",verify_email:r.verify_email}),onRefresh:()=>a(e=>({...e})),isEmployee:!1,onCreate:()=>d(!0)}),!u&&c.length>0&&s.jsx(l,{textAlign:"center",mt:4,children:s.jsx(B,{count:Math.ceil(y/i.perPage)||1,page:i.page,onChange:(e,r)=>a(g=>({...g,page:r}))})})]})]})]}),s.jsx(b,{open:f!==null,userId:f,token:p,onClose:()=>x(null),lang:m,isEmployee:!1}),s.jsx(D,{open:U,onClose:()=>d(!1),onRefresh:()=>a(e=>({...e}))})]})}export{re as default};
