import{b as l}from"./index-CZ2e1OXn.js";import{h as m}from"./billingService-DEb_NZFF.js";import{r as f}from"./react-C0aVURRx.js";import{u as w}from"./useCustomSnackbar-Br_GLiSh.js";import{u as p}from"./i18n-react-CHYEX_9Z.js";function v(){const a=l(r=>r.authToken),{t}=p("orders"),{notify:s}=w(),[u,c]=f.useState(!1);return{download:async r=>{var d,i;if(!a){s(t("errors.not_authenticated"),"warning");return}c(!0);try{const n=await m(r,a),e=window.URL.createObjectURL(n),o=document.createElement("a");o.href=e,o.download=r,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(e),s(t("tickets.download_success"),"success")}catch(n){let e=t("errors.download_failed"),o="error";((d=n.response)==null?void 0:d.status)===404?(e=t("errors.not_found"),o="warning"):((i=n.response)==null?void 0:i.status)===401&&(e=t("errors.unauthorized"),o="warning"),s(e,o)}finally{c(!1)}},downloading:u}}export{v as u};
