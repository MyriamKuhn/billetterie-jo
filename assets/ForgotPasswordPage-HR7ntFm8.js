import{r as l,j as e}from"./react-C0aVURRx.js";import{a as P,S,P as y,p as E}from"./index-C8vFMK_G.js";import{A as k,g as u}from"./AlertMessage-Div13Ill.js";import{a as C}from"./axios-Dq7h7Pqt.js";import{a as L}from"./validation-491qobvS.js";import{u as T}from"./i18n-react-InMECBPB.js";import{q as x,v as f,O as A,a1 as B,B as F,r as M,a6 as W}from"./mui-uHutCCHi.js";import{O as q}from"./vendor-DWEXA6-K.js";import"./dayjs-DMyafwSS.js";import"./zustand-DgaMZn_z.js";import"./i18n-Bhc83OLH.js";import"./emotion-BfGcg3ty.js";import"./helmet-BZ3LMwLd.js";import"./cookie-consent-DtjjNNxi.js";function Q(){const{t}=T("forgotPassword"),h=q(),b=P.getState().lang,[r,w]=l.useState(""),[d,g]=l.useState(!1),[c,m]=l.useState("idle"),[j,o]=l.useState(""),n=L(r.trim()),v=async a=>{var p;if(a.preventDefault(),!!n){g(!0),m("idle"),o("");try{const{status:i}=await E(r.trim(),b);if(i>=200&&i<300)m("success"),o(t("forgotPassword.successMessage"));else throw new Error("Unexpected status")}catch(i){if(C.isAxiosError(i)){const s=(p=i.response)==null?void 0:p.data;s!=null&&s.code?o(u(t,s==null?void 0:s.code)):o(u(t,"generic_error"))}else o(u(t,"network_error"));m("error")}finally{g(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:t("seo.title"),description:t("seo.description")}),e.jsx(y,{disableCard:!0,children:e.jsxs(x,{component:"form",onSubmit:v,sx:{maxWidth:400,mx:"auto",mt:{xs:1,sm:4,md:8},p:4,borderRadius:2,boxShadow:3,backgroundColor:"background.paper",border:a=>`1px solid ${a.palette.divider}`},children:[e.jsx(f,{variant:"h4",gutterBottom:!0,align:"center",children:t("forgotPassword.title")}),e.jsx(f,{variant:"body1",align:"center",sx:{mb:2},children:t("forgotPassword.description")}),(c==="error"||c==="success")&&e.jsx(k,{message:j,severity:c==="success"?"success":"error"}),e.jsxs(A,{spacing:2,sx:{mt:2},children:[e.jsx(B,{required:!0,fullWidth:!0,id:"email",label:t("forgotPassword.email"),type:"email",value:r,onChange:a=>w(a.target.value),autoComplete:"email",error:r.length>0&&!n,helperText:r.length>0&&!n?t("forgotPassword.invalidEmail"):""}),e.jsx(F,{type:"submit",variant:"contained",fullWidth:!0,disabled:d||!n,startIcon:d?e.jsx(M,{color:"inherit",size:16}):void 0,children:d?`${t("forgotPassword.buttonLoading")}â€¦`:t("forgotPassword.button")}),e.jsx(x,{sx:{textAlign:"center",mt:1},children:e.jsx(W,{component:"button",variant:"body2",onClick:()=>h("/login"),children:t("forgotPassword.backToLogin")})})]})]})})]})}export{Q as default};
