import{r as n,j as s}from"./react-C0aVURRx.js";import{a as A,b as C,P as h,S,O as _}from"./index-CZ2e1OXn.js";import{u as v,U as w,A as P,a as b,b as D}from"./AdminEmployeeCreateModal-3wYF5z3F.js";import{u as R}from"./useUsers-BbDXT3T0.js";import{E as T}from"./ErrorDisplay-DtdBsBay.js";import{u as k}from"./i18n-react-CHYEX_9Z.js";import{t as O,q as l,_ as B}from"./mui-BBaOU7V-.js";import"./dayjs-DMyafwSS.js";import"./axios-xsH4HHeE.js";import"./zustand-DgaMZn_z.js";import"./vendor-1UMx7qFY.js";import"./i18n-Bhc83OLH.js";import"./emotion-BKoPsIBf.js";import"./helmet-DqAb31yQ.js";import"./cookie-consent-DYVQHhqE.js";import"./FilterField-Dqw7-p3q.js";import"./FilterSelect-C7Jqrsxx.js";import"./format-_gz818Hm.js";import"./useCustomSnackbar-Br_GLiSh.js";import"./PasswordWithConfirmation-DqFmO8lg.js";function re(){const{t}=k("users"),m=A(e=>e.lang),p=C(e=>e.authToken),j=v(),[i,a]=n.useState({firstname:"",lastname:"",email:"",perPage:10,page:1}),{users:c,total:y,loading:u,error:E,validationErrors:o}=R(i,p,"user"),[f,x]=n.useState(null),[U,d]=n.useState(!1);return n.useEffect(()=>{if(o){const e={};o.firstname&&(e.firstname=""),o.lastname&&(e.lastname=""),o.email&&(e.email=""),a(r=>({...r,...e}))}},[o]),E?s.jsx(h,{children:s.jsx(T,{title:t("errors.title"),message:t("errors.unexpected"),showRetry:!0,retryButtonText:t("errors.retry"),onRetry:()=>a(e=>({...e})),showHome:!0,homeButtonText:t("errors.home")})}):s.jsxs(s.Fragment,{children:[s.jsx(S,{title:t("seo.title"),description:t("seo.description")}),s.jsxs(h,{disableCard:!0,children:[s.jsx(O,{variant:"h4",sx:{px:2},children:t("users.title")}),s.jsxs(l,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,p:2},children:[s.jsx(w,{role:"user",filters:i,onChange:e=>a(r=>({...r,...e}))}),s.jsxs(l,{component:"main",flex:1,children:[u?s.jsx(l,{textAlign:"center",py:8,children:s.jsx(_,{})}):s.jsx(P,{lang:m,users:c,onViewDetails:x,onSave:async(e,r)=>await j(e,{is_active:r.is_active,twofa_enabled:r.twofa_enabled,firstname:r.firstname,lastname:r.lastname,email:r.email,role:"user",verify_email:r.verify_email}),onRefresh:()=>a(e=>({...e})),isEmployee:!1,onCreate:()=>d(!0)}),!u&&c.length>0&&s.jsx(l,{textAlign:"center",mt:4,children:s.jsx(B,{count:Math.ceil(y/i.perPage)||1,page:i.page,onChange:(e,r)=>a(g=>({...g,page:r}))})})]})]})]}),s.jsx(b,{open:f!==null,userId:f,token:p,onClose:()=>x(null),lang:m,isEmployee:!1}),s.jsx(D,{open:U,onClose:()=>d(!1),onRefresh:()=>a(e=>({...e}))})]})}export{re as default};
