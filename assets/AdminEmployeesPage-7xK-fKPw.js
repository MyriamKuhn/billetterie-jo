import{r as n,j as t}from"./react-C0aVURRx.js";import{a as v,b as A,P as g,S as C,O as S}from"./index-CY5QxFiC.js";import{u as U,U as w,A as P,a as b,b as D}from"./AdminEmployeeCreateModal-DVFhhukI.js";import{u as R}from"./useUsers-CgQZ5KpJ.js";import{E as T}from"./ErrorDisplay-CqpRduDy.js";import{u as k}from"./i18n-react-DKLIrUu3.js";import{v as O,q as l,a0 as B}from"./mui-CUyLNCSY.js";import"./dayjs-DMyafwSS.js";import"./axios-Dq7h7Pqt.js";import"./zustand-DgaMZn_z.js";import"./vendor-DdBxgcTm.js";import"./i18n-Bhc83OLH.js";import"./emotion-3DDxC2qG.js";import"./helmet-D-y5f56R.js";import"./cookie-consent-h1U6JL3J.js";import"./FilterField-pDWxjenY.js";import"./FilterSelect-BlR2P65X.js";import"./format-_gz818Hm.js";import"./useCustomSnackbar-Cbu9vsWE.js";import"./PasswordWithConfirmation-fPFCWCsA.js";function re(){const{t:s}=k("users"),m=v(e=>e.lang),p=A(e=>e.authToken),h=U(),[i,o]=n.useState({firstname:"",lastname:"",email:"",perPage:10,page:1}),{users:c,total:j,loading:u,error:E,validationErrors:a}=R(i,p,"employee"),[f,x]=n.useState(null),[_,d]=n.useState(!1);return n.useEffect(()=>{if(a){const e={};a.firstname&&(e.firstname=""),a.lastname&&(e.lastname=""),a.email&&(e.email=""),o(r=>({...r,...e}))}},[a]),E?t.jsx(g,{children:t.jsx(T,{title:s("errors.title"),message:s("errors.unexpected_employee"),showRetry:!0,retryButtonText:s("errors.retry"),onRetry:()=>o(e=>({...e})),showHome:!0,homeButtonText:s("errors.home")})}):t.jsxs(t.Fragment,{children:[t.jsx(C,{title:s("seo.title_employee"),description:s("seo.description_employee")}),t.jsxs(g,{disableCard:!0,children:[t.jsx(O,{variant:"h4",sx:{px:2},children:s("employees.title")}),t.jsxs(l,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,p:2},children:[t.jsx(w,{role:"employee",filters:i,onChange:e=>o(r=>({...r,...e}))}),t.jsxs(l,{component:"main",flex:1,children:[u?t.jsx(l,{textAlign:"center",py:8,children:t.jsx(S,{})}):t.jsx(P,{lang:m,users:c,onViewDetails:x,onSave:async(e,r)=>await h(e,{is_active:r.is_active,twofa_enabled:r.twofa_enabled,firstname:r.firstname,lastname:r.lastname,email:r.email,role:"employee",verify_email:r.verify_email}),onRefresh:()=>o(e=>({...e})),isEmployee:!0,onCreate:()=>d(!0)}),!u&&c.length>0&&t.jsx(l,{textAlign:"center",mt:4,children:t.jsx(B,{count:Math.ceil(j/i.perPage)||1,page:i.page,onChange:(e,r)=>o(y=>({...y,page:r}))})})]})]})]}),t.jsx(b,{open:f!==null,userId:f,token:p,onClose:()=>x(null),lang:m,isEmployee:!0}),t.jsx(D,{open:_,onClose:()=>d(!1),onRefresh:()=>o(e=>({...e}))})]})}export{re as default};
