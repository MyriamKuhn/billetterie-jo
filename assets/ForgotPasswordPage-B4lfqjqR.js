import{r as l,j as t}from"./react-C0aVURRx.js";import{S as P}from"./Seo-DMFKsBC4.js";import{P as S}from"./PageWrapper-Ct9UgNZL.js";import{A as y,g as u}from"./AlertMessage-CNaxI2wP.js";import{a as E,p as k}from"./index-DXCM6E3X.js";import{a as C}from"./axios-xsH4HHeE.js";import{a as L}from"./validation-491qobvS.js";import{u as T}from"./i18n-react-BJpG_9Eh.js";import{q as x,t as f,G as A,J as B,B as F,C as M,ab as W}from"./mui-7-KVGWFD.js";import{O as q}from"./vendor-D9jJ6Kpb.js";import"./dayjs-DMyafwSS.js";import"./helmet-0WMJf2Lb.js";import"./i18n-Bhc83OLH.js";import"./zustand-DgaMZn_z.js";import"./emotion-P9cj9Rdp.js";import"./cookie-consent-CRxe7e1g.js";function Y(){const{t:e}=T("forgotPassword"),h=q(),b=E.getState().lang,[r,w]=l.useState(""),[d,g]=l.useState(!1),[c,m]=l.useState("idle"),[j,o]=l.useState(""),n=L(r.trim()),v=async a=>{var p;if(a.preventDefault(),!!n){g(!0),m("idle"),o("");try{const{status:i}=await k(r.trim(),b);if(i>=200&&i<300)m("success"),o(e("forgotPassword.successMessage"));else throw new Error("Unexpected status")}catch(i){if(C.isAxiosError(i)){const s=(p=i.response)==null?void 0:p.data;s!=null&&s.code?o(u(e,s==null?void 0:s.code)):o(u(e,"generic_error"))}else o(u(e,"network_error"));m("error")}finally{g(!1)}}};return t.jsxs(t.Fragment,{children:[t.jsx(P,{title:e("seo.title"),description:e("seo.description")}),t.jsx(S,{disableCard:!0,children:t.jsxs(x,{component:"form",onSubmit:v,sx:{maxWidth:400,mx:"auto",mt:{xs:1,sm:4,md:8},p:4,borderRadius:2,boxShadow:3,backgroundColor:"background.paper",border:a=>`1px solid ${a.palette.divider}`},children:[t.jsx(f,{variant:"h4",gutterBottom:!0,align:"center",children:e("forgotPassword.title")}),t.jsx(f,{variant:"body1",align:"center",sx:{mb:2},children:e("forgotPassword.description")}),(c==="error"||c==="success")&&t.jsx(y,{message:j,severity:c==="success"?"success":"error"}),t.jsxs(A,{spacing:2,sx:{mt:2},children:[t.jsx(B,{required:!0,fullWidth:!0,id:"email",label:e("forgotPassword.email"),type:"email",value:r,onChange:a=>w(a.target.value),autoComplete:"email",error:r.length>0&&!n,helperText:r.length>0&&!n?e("forgotPassword.invalidEmail"):""}),t.jsx(F,{type:"submit",variant:"contained",fullWidth:!0,disabled:d||!n,startIcon:d?t.jsx(M,{color:"inherit",size:16}):void 0,children:d?`${e("forgotPassword.buttonLoading")}â€¦`:e("forgotPassword.button")}),t.jsx(x,{sx:{textAlign:"center",mt:1},children:t.jsx(W,{component:"button",variant:"body2",onClick:()=>h("/login"),children:e("forgotPassword.backToLogin")})})]})]})})]})}export{Y as default};
