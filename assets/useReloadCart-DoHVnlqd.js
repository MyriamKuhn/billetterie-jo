import{r}from"./react-C0aVURRx.js";import{u as S,a as b}from"./index-0-ZpxhMj.js";import{u as y}from"./useCustomSnackbar-CmxjmyMH.js";import{u as _}from"./i18n-react-Cm5iFQwB.js";function x(){const a=S(t=>t.loadCart),{notify:n}=y(),{t:e}=_("cart"),C=b(t=>t.lang),[l,u]=r.useState(!1),[g,c]=r.useState(!1),[p,s]=r.useState(!1),f=r.useRef(null),o=r.useCallback(async()=>{var i,d;s(!0),(i=f.current)==null||i.abort();const t=new AbortController;f.current=t,c(!1),u(!0);try{await a()}catch(m){if(m.code!=="ERR_CANCELED"){c(!0);const E=(d=m.response)==null?void 0:d.status,R=e(E===404?"errors.error_not_found":"errors.error_load");n(R,"error")}}finally{u(!1),s(!1)}},[a,n,e]);return r.useEffect(()=>{o(),l||s(!1)},[o,C]),{loading:l,hasError:g,isReloading:p,reload:o}}export{x as u};
